1. **Проанализируйте систему компании и C4-диаграмму в контексте планирования мониторинга.**
2. **Добавьте в файл раздел «Мотивация».** Напишите здесь, почему в систему нужно добавить мониторинг и что это даст компании.
3. **Добавьте раздел «Выбор подхода к мониторингу».** Выберите, какой подход к мониторингу вы будете использовать: RED, USE или «Четыре золотых сигнала». Для разных частей системы можно использовать разные подходы.
4. **Опишите, какие метрики и в каких частях системы вы будете отслеживать.** Перед вами список метрик. Выберите метрики, которые вы считаете нужным отслеживать. Для выбранных метрик напишите:
    - Зачем нужна эта метрика.
    - Нужны ли ярлыки для этой метрики. Если ярлыки нужны, опишите, какие именно вы планируете добавить. Вы можете не ограничивать себя только этим списком. Если вы видите, что стоит добавить какие-то ещё метрики, — добавьте и их тоже.
5. **Добавьте раздел «План действий».** Напишите высокоуровнево, какие задачи вы видите для реализации. Это будет драфт технического задания. Например, «Создать инстанс time-series базы с использованием такой-то технологии».

## Мотивация

Мониторинг информационной системы — это непрерывный процесс наблюдения за её работоспособностью, производительностью, безопасностью и другими критически важными параметрами. Он позволяет своевременно выявлять и устранять проблемы, предотвращать сбои и оптимизировать работу системы.

Внедрение мониторинга позволит измерить эксплуатационные характеристики функционирования системы. Сформировать понимание параметров штатного режима работы. Оперативно реагировать на отклонения от штатного режима функционирования, не дожидаясь негативной обратной связи со стороны пользователей.

## Выбор подхода к мониторингу

Есть несколько базовых подходов к мониторингу, которые обычно используют в технической плоскости. 

| Подход                 | Показатели                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | Сфера применения                  |
| ---------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------- |
| RED                    | - **Requests Rate** — частота запросов в секунду.<br>- **Errors** — количество ошибок в секунду.<br>- **Duration** — длительность.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | Веб-сервисы, базы данных, очереди |
| USE                    | - **Utilization** (утилизация) — это среднее время, которое ресурс занят работой. Измеряется в процентах.<br>- **Saturation** (насыщенность) — объём работы, которую ресурс не может выполнить и вынужден откладывать (например, в очередь), чтобы сохранять работоспособность. Насыщенность можно измерить как длину очереди.<br>- **Errors** (ошибки) — количество ошибок.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | Инфраструктура                    |
| Четыре золотых сигнала | - **Задержка** — это время, которое уходит на доставку запроса по сети от отправителя к получателю.<br>- **Трафик** — это показатель активности пользователей в вашем приложении. Его можно измерить с помощью любого высокоуровневого системного показателя. В веб-приложениях трафик обычно считают как количество HTTP-запросов в секунду.<br>- **Ошибки** — это частота неудачных запросов. Сюда относятся как явные ошибки (например, ошибки с кодом `500`), так и неявные — например, статус запроса `200`, но контент доставили неправильно.<br>- **Насыщенность** — этот параметр показывает, насколько «заполнена» ваша система. Насыщенность напрямую связана с показателем использования системы, но иногда её сложно измерить. Сбои могут возникнуть даже тогда, когда система не загружена на сто процентов. Поэтому важно определить целевой уровень использования. | API                               |

![Существующая архитектура](../Task1/architecture-as-is.png)

| Компонент               | Подход                 |
| ----------------------- | ---------------------- |
| Shop API                | Четыре золотых сигнала |
| CRM API                 | Четыре золотых сигнала |
| MES API                 | Четыре золотых сигнала |
| Shop DB                 | RED                    |
| MES DB                  | RED                    |
| Messages Queue          | RED                    |
| 3d files storage        | RED                    |
| Виртуальные серверы EC2 | USE                    |
## Метрики для отслеживания

### Shop API

1. Number of requests (RPS) for internet shop API
2. Number of requests (RPS) per user for internet shop API
3. CPU % for shop API
4. Memory Utilisation for shop API
5. Response time (latency) for shop API
6. Number of `HTTP 200` for shop API
7. Number of `HTTP 500` for shop API
8. Number of `HTTP 500` for shop API
9. Number of simultanious sessions for shop API
10. Kb tranferred (received) for shop API
11. Kb provided (sent) for shop API

### CRM API

1. Number of requests (RPS) for CRM API
2. Number of requests (RPS) per user for CRM API
3. CPU % for CRM API
4. Memory Utilisation for CRM API
5. Number of `HTTP 200` for CRM API
6. Number of `HTTP 500` for CRM API
7. Number of simultanious sessions for CRM API
8. Kb tranferred (received) for CRM API
9. Kb provided (sent) for CRM API

### MES API

1. Number of requests (RPS) for MES API
2. Number of requests (RPS) per user for MES API
3. CPU % for MES API
4. Memory Utilisation for MES API
5. Response time (latency) for CRM API
6. Response time (latency) for MES API
7. Number of `HTTP 200` for MES API
8. Number of `HTTP 500` for MES API
9. Number of simultanious sessions for MES API
10. Kb tranferred (received) for MES API
11. Kb provided (sent) for MES API

### Shop DB

1. Memory Utilisation for shop db instance
2. Number of connections for shop db instance
3. Size of shop db instance

### MES DB

1. Memory Utilisation for MES db instance
2. Number of connections for MES db instance
3. Size of MES db instance

### Messages Queue

1. Number of `dead-letter-exchange` letters in RabbitMQ
2. Number of message `in flight` in RabbitMQ

### 3d files storage

1. Size of S3 storage

### План действий

TBD

